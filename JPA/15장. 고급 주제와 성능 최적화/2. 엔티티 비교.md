# 엔티티 비교

영속성 컨텍스트 내부에는 엔티티 인스턴스를 보관하는 1차 캐시가 존재한다.  
이는 영속성 컨텍스트와 생명주기를 같이 한다.   

1차 캐시의 가장 큰 장점은 애플리케이션 수준에서 지원되는 반복 가능한 읽기 격리 수준 제공이다.
이를 통해 같은 영속성 컨텍스트 내에서는 동일한 객체가 리턴됨이 보장된다.   

서로 다른 트랜잭션에서 각각 엔티티를 가져오면, 전략에 따라 서로 다른 영속성 컨텍스트가 사용된다.   

> 영속성 컨텍스트가 다르면 같은 객체를 조회해도 서로 다른 참조를 가진 객체가 생성된다.

따라서 같은 영속성 컨텍스트 내에서는 동일성 비교가 유효하다. (참조 비교)     
반면, 다른 영속성 컨텍스트라면 동일성 비교가 유효하다. (필드 비교)    
또는 식별자 값이 유효하다면 식별갑에 대한 동일성 비교 역시 유효하다.   